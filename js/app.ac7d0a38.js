(function(e){function t(t){for(var r,i,c=t[0],s=t[1],u=t[2],p=0,h=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"8c3d":function(e,t,n){},b1ca:function(e,t,n){"use strict";n("8c3d")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=n("2909"),o=n("5530"),i=n("3835"),c=n("b85c"),s=(n("18a5"),n("d81d"),n("4e82"),n("99af"),n("b0c0"),n("d3b7"),n("159b"),n("a434"),n("ddb0"),n("4d90"),n("fb6a"),n("07ac"),n("7aaa")),u=n("b946"),l={id:"controls"},p=Object(r["g"])({setup:function(e){var t=new s["b"]({width:1920,height:1080,backgroundColor:16759809}),n=Object(r["k"])(null);Object(r["i"])((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.appendChild(t.view)}));var p=Object(r["k"])(window.innerHeight==screen.height),h=function(){p.value=!p.value,p.value?document.documentElement.requestFullscreen():document.exitFullscreen()};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=Object(r["k"])(0),l=100,p=60,h=[{name:"euro",districts:[{order:1,steps:[[],["euro-01"],["euro-05"],["euro-08"]]},{order:2,steps:[[],["euro-03"],["euro-06"],["euro-09"],["euro-10"]]},{order:0,steps:[[],["euro-02"],["euro-04"],["euro-07"]]}]},{name:"egypt",districts:[{order:1,steps:[["egypt-03"],["egypt-01"],["egypt-05"],["egypt-06"],["egypt-07"]]},{order:2,steps:[["egypt-03"],["egypt-02"],["egypt-11"],["egypt-12"],["egypt-13"]]},{order:0,steps:[["egypt-03"],["egypt-04"],["egypt-08"],["egypt-09"],["egypt-10"]]}]},{name:"china",districts:[{order:2,steps:[["china-13"],["china-10","china-13"],["china-07","china-13"],["china-04","china-13"],["china-01","china-13"]]},{order:1,steps:[["china-13"],["china-11","china-13"],["china-08","china-13"],["china-05","china-13"],["china-02","china-13"]]},{order:0,steps:[["china-13"],["china-12","china-13"],["china-09","china-13"],["china-06","china-13"],["china-03","china-13"]]}]}],d=450,f=[1790,911],v=35/90*(Math.PI/2),g=Math.PI/6,y=Math.PI/4,m=120,b=.5,M=s["e"].from("./resources/images/earth.compress.png");M.anchor.set(.367,.5),M.position.set(f[0],f[1]),M.scale.set(1),t.stage.addChild(M);var O=h.map((function(e){var n=e.districts.map((function(){return[]})),r=e.districts.map((function(e,t){return t}));r.sort((function(t,n){return e.districts[n].order-e.districts[t].order}));var a,o=Object(c["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;n[i]=e.districts[i].steps.map((function(n){return n.map((function(n){var r=s["e"].from("./resources/images/".concat(e.name,"/").concat(n,".png.compress.png"));return r.anchor.set(.367,.5),r.position.set(f[0],f[1]),r.scale.set(1),t.stage.addChild(r),r}))}))}}catch(u){o.e(u)}finally{o.f()}return n})),j=6,w=j,x=h.map((function(e){return e.districts.map((function(){return 1}))}));function k(){for(var e=0;e<h.length;++e)for(var t=h[e].districts,n=0;n<t.length;++n)for(var r=t[n].steps,a=function(t){var r=t==x[e][n];O[e][n][t].forEach((function(e){e.visible=r}))},o=0;o<r.length;++o)a(o)}function P(e){for(var t=0;t<h.length;++t)for(var n=h[t].districts,r=0;r<n.length;++r)for(var a=n[r].steps,o=0;o<a.length;++o)O[t][r][o].forEach((function(t){t.rotation+=e}));M.rotation+=e}function C(){return O[0][0][1][0].rotation}k();var I=0;t.ticker.add((function(e){if(I+=e,I>=m&&(I-=m,Math.random()<b)){for(var t=h.map((function(e,t){var n=v-g+C()-t*(2*Math.PI/h.length),r=(n-y)%(2*Math.PI);return r<0&&(r+=2*Math.PI),Math.min(r,2*Math.PI-r)})),n=0,r=1;r<t.length;++r)t[n]>t[r]&&(n=r);var a=Math.floor(Math.random()*x[n].length);x[n][a]+1<h[n].districts[a].steps.length&&(x[n][a]+=1,k(),he())}}));var q=Object(r["k"])(null),S=new s["d"](t.renderer);S.on("pointerdown",(function(e){var t=e.data.global.x,n=e.data.global.y,r=f[0],a=f[1];t==r&&n==a||(q.value=[t,n])})),S.on("pointerup",(function(){q.value=null})),S.on("pointerupoutside",(function(){q.value=null})),S.on("pointermove",(function(e){if(null!==q.value){var t=e.data.global.x,n=e.data.global.y,r=f[0],a=f[1];if(t==r&&n==a)return;var o=Object(i["a"])(q.value,2),c=o[0],s=o[1];q.value=[t,n];var u=Math.atan2(n-a,t-r)-Math.atan2(s-a,c-r);P(u),ce()}}));var _=s["e"].from("./resources/images/god-01.png"),E=s["e"].from("./resources/images/god-02.png");[_,E].forEach((function(e){e.anchor.set(0),e.position.set(0,0),e.scale.set(.6),t.stage.addChild(e)}));var F=Object(r["k"])(!1);Object(r["n"])((function(){F.value?(_.visible=!1,E.visible=!0):(_.visible=!0,E.visible=!1)}));var A=[{type:"fire",path:"./resources/images/res-fire.png"},{type:"chemistry",path:"./resources/images/res-chemistry.png"},{type:"radiation",path:"./resources/images/res-radiation.png"},{type:"biology",path:"./resources/images/res-biology.png"},{type:"battery",path:"./resources/images/res-battery.png"}],T=function(e){var t=s["e"].from(A[e].path);return t.anchor.set(.5),t.scale.set(.5),t},H=[{x:1869,y:623,scale:.3},{x:1789,y:632,scale:.3},{x:1716,y:657,scale:.3},{x:1651,y:692,scale:.3},{x:1588,y:754,scale:.3},{x:1790,y:911,scale:1.2}],J=Array.apply(null,Array(H.length)).map((function(){return V()})),R=s["e"].from("./resources/images/candidates.png");function z(){for(var e=0;e<H.length;++e){var t=J[e][1];t.position.set(H[e].x,H[e].y),t.scale.set(H[e].scale)}}function B(e){return"monster"==e||"storm"==e||"wave"==e}R.scale.set(.4),R.anchor.set(1),R.position.set(1920,1080),t.stage.addChild(R),z(),J.forEach((function(e){return t.stage.addChild(e[1])}));var D=new u["kdTree"]([],(function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}),["x","y"]),G=[300,200],K=32,L=8,N=45;function Q(e,n){var r=B(e),a=Math.random()<.5?1:-1;function i(c){var s=f[0],u=f[1],l=s-n.position.x,p=u-n.position.y,h=Math.sqrt(l*l+p*p),v=l/h,g=p/h,y=n.position.x+K*c*v,m=n.position.y+K*c*g,b=Math.sqrt(Math.pow(s-y,2)+Math.pow(u-m,2)),M=Math.cos(C()),O=Math.sin(C()),j=[[M,O],[-O,M]],w=function(e,t){return{x:j[0][0]*(e-s)+j[0][1]*(t-u),y:j[1][0]*(e-s)+j[1][1]*(t-u)}},x=[[M,-O],[O,M]],k=function(e,t){return{x:x[0][0]*e+x[0][1]*t+s,y:x[1][0]*e+x[1][1]*t+u}};if(!r){var P=D.nearest(Object(o["a"])({id:0},w(y,m)),1,1920);if(P.length&&P[0][1]<2*N){var I=k(P[0][0].x,P[0][0].y),q=I.x,S=I.y,_=Math.abs(s*(m-S)+y*(S-u)+q*(u-m))/Math.sqrt(Math.pow(s-y,2)+Math.pow(u-m,2)),E=Math.sqrt(Math.pow(s-q,2)+Math.pow(u-S,2)-_*_),F=Math.sqrt(4*N*N-_*_),A=Math.sqrt(Math.pow(q-y,2)+Math.pow(S-m,2)-_*_),T=E<=b?F-A:F+A,H=y-T*v,J=m-T*g;return t.ticker.remove(i),n.position.set(H,J),void ne(e,n,P[0][0].id,w(H,J))}}if(b<d){var R=y-(d-b)*v,z=m-(d-b)*g;return t.ticker.remove(i),n.position.set(R,z),void ne(e,n,null,w(R,z))}n.position.set(y,m),n.angle+=a*L*c}return i}function U(e,n){var r;(r=n.position).set.apply(r,G),n.scale.set(.5),n.rotation=Math.random()*(2*Math.PI),t.stage.addChild(n),t.ticker.add(Q(e,n))}function V(){var e=Math.floor(Math.random()*A.length);return[A[e].type,T(e)]}var W=120,X=6,Y=0;t.ticker.add((function(e){if(Y+=e,Y>X&&F.value&&(F.value=!1),Y>W){Y-=W,F.value=!0;var n=V();J.splice(0,0,n),U.apply(void 0,Object(a["a"])(J.pop())),z(),t.stage.addChild(n[1])}}));var Z=Object(a["a"])(Array(15).keys()).map((function(e){return s["g"].from("./resources/images/explode/explode-".concat(String(e).padStart(2,"0"),".png"))})),$=300,ee=0,te={};function ne(e,n,r,a){if(B(e))t.stage.removeChild(n);else{var i=f[0],c=f[1],s=Math.atan2(n.position.y-c,n.position.x-i)-C(),u=Math.sqrt(Math.pow(n.position.x-i,2)+Math.pow(n.position.y-c,2));s%=2*Math.PI,s<0&&(s=s%(2*Math.PI)+2*Math.PI);var l=ee++,p=Object(o["a"])({id:l},a),h={theta:s,radius:u,type:e,item:n,node:p,parent:r,children:[]};te[l]=h,null!=r&&te[r].children.push(l),D.insert(p),re(h),Math.sqrt(Math.pow(n.position.x-G[0],2)+Math.pow(n.position.y-G[1],2))<=$&&ve(),oe(l)}}function re(e){var t=e.radius*Math.cos(C()+e.theta)+f[0],n=e.radius*Math.sin(C()+e.theta)+f[1];e.item.position.set(t,n)}function ae(e){var t,n=te[e],r=n.type,o=[],i=Object(c["a"])(n.children);try{for(i.s();!(t=i.n()).done;){var s=t.value;te[s].type===r&&o.push.apply(o,Object(a["a"])(ae(s)))}}catch(u){i.e(u)}finally{i.f()}return o.push(e),o}function oe(r){for(var a=te[r].type,o=r;;){var i=te[o].parent;if(null===i||te[i].type!==a)break;o=i}var u=ae(o);n.value+=p*u.length;var d=u.map((function(e){return te[e].item.position.x})).reduce((function(e,t){return e+t}),0)/u.length,g=u.map((function(e){return te[e].item.position.y})).reduce((function(e,t){return e+t}),0)/u.length,y=-(Math.atan2(g-f[1],d-f[0])-C()-v)%(2*Math.PI);y<0&&(y+=2*Math.PI),y/=2*Math.PI;var m=Math.floor(y*h.length),b=y*h.length-m,M=b<=.5;if(!(M&&u.length<e)){var O,j=Object(c["a"])(u);try{var P=function(){var e=O.value,n=te[e],r=n.children.slice();r.reverse();var a,o=Object(c["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;ie(i)}}catch(p){o.e(p)}finally{o.f()}if(null!==n.parent){var u=te[n.parent].children.indexOf(e);te[n.parent].children.splice(u,1)}delete te[e],D.remove(n.node),t.stage.removeChild(n.item);var l=new s["a"](Z);l.anchor.set(.5),l.position.set(n.item.position.x,n.item.position.y),l.loop=!1,l.onComplete=function(){t.stage.removeChild(l)},t.stage.addChild(l),l.play()};for(j.s();!(O=j.n()).done;)P()}catch(q){j.e(q)}finally{j.f()}if(M){var I=Math.floor((1-2*b)*h[m].districts.length);x[m][I]>0&&(x[m][I]-=1,n.value+=l,k(),he())}else w-=1,pe(),0===w&&ve()}}function ie(e){var n=te[e],r=n.children.slice();r.reverse();var a,o=Object(c["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;ie(i)}}catch(u){o.e(u)}finally{o.f()}if(t.ticker.add(Q(n.type,n.item)),null!==n.parent){var s=te[n.parent].children.indexOf(e);te[n.parent].children.splice(s,1)}delete te[e],D.remove(n.node)}function ce(){Object.values(te).forEach(re)}var se=new s["c"];se.beginFill(8444213),se.drawRect(0,-19,200,38),se.position.set(144,924),t.stage.addChild(se),se.transform.scale.set(1,1);var ue=new s["c"];ue.beginFill(8897269),ue.drawRect(0,-19,200,38),ue.position.set(144,1020),t.stage.addChild(ue),ue.transform.scale.set(1,1);var le=s["e"].from("./resources/images/health.png");function pe(){var e=w/j;se.transform.scale.set(e,1)}function he(){var e=Math.max.apply(Math,Object(a["a"])(x.map((function(e,t){return e.reduce((function(e,t){return e+t}),0)/h[t].districts.map((function(e){return e.steps.length-1})).reduce((function(e,t){return e+t}),0)}))));ue.transform.scale.set(1-e,1)}le.anchor.set(0,1),le.position.set(0,1080),le.scale.set(1.5),t.stage.addChild(le),he();var de=new s["f"]("0",{fontFamily:"ArtHistoryBook",fontSize:120,fill:0,align:"right"});de.anchor.set(1,0),de.position.set(1870,50),t.stage.addChild(de),Object(r["n"])((function(){de.text="".concat(n.value)}));var fe=s["e"].from("./resources/images/failure.compress.png");function ve(){t.stage.addChild(fe),t.ticker.stop()}fe.anchor.set(.5),fe.position.set(960,540),fe.scale.set(.8)}return d(),function(e,t){var a=Object(r["l"])("font-awesome-icon");return Object(r["j"])(),Object(r["d"])(r["a"],null,[Object(r["e"])("div",{ref_key:"el",ref:n,id:"game"},null,512),Object(r["e"])("div",l,[Object(r["e"])("div",null,[Object(r["e"])("button",{onClick:h},[Object(r["f"])(a,{icon:p.value?"compress":"expand"},null,8,["icon"])])])])],64)}}});n("b1ca");const h=p;var d=h,f=n("ecee"),v=n("c074"),g=n("ad3d");f["c"].add(v["b"],v["a"]),Object(r["c"])(d).component("font-awesome-icon",g["a"]).mount("#app")}});
//# sourceMappingURL=app.ac7d0a38.js.map