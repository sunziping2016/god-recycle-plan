(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"44b2":function(e,t,n){},"467a":function(e,t,n){"use strict";n("44b2")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=n("2909"),o=n("5530"),i=n("3835"),s=n("b85c"),c=(n("18a5"),n("d81d"),n("4e82"),n("99af"),n("b0c0"),n("d3b7"),n("159b"),n("a434"),n("ddb0"),n("4d90"),n("fb6a"),n("07ac"),n("7aaa")),u=n("b946"),l={id:"controls"},d=Object(r["g"])({setup:function(e){var t=new c["b"]({width:1920,height:1080,backgroundColor:16759809}),n=Object(r["k"])(null);Object(r["i"])((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.appendChild(t.view)}));var d=Object(r["k"])(window.innerHeight==screen.height),p=function(){d.value=!d.value,d.value?document.documentElement.requestFullscreen():document.exitFullscreen()},h=c["e"].from("./resources/images/start.png");t.stage.addChild(h);var f=c["e"].from("./resources/images/btn-mode1.png");f.interactive=!0,f.buttonMode=!0,f.position.set(500,500),t.stage.addChild(f),f.on("pointerdown",(function(){t.stage.removeChild(h),t.stage.removeChild(f),t.stage.removeChild(v);var e=c["e"].from("./resources/images/help-mode1.png");e.interactive=!0,e.buttonMode=!0,t.stage.addChild(e),e.on("pointerdown",(function(){t.stage.removeChild(e),g()}))}));var v=c["e"].from("./resources/images/btn-mode2.png");function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,l=Object(r["k"])(0),d=100,p=60,h=[{name:"euro",districts:[{order:1,steps:[[],["euro-01"],["euro-05"],["euro-08"]]},{order:2,steps:[[],["euro-03"],["euro-06"],["euro-09"],["euro-10"]]},{order:0,steps:[[],["euro-02"],["euro-04"],["euro-07"]]}]},{name:"egypt",districts:[{order:1,steps:[["egypt-03"],["egypt-01"],["egypt-05"],["egypt-06"],["egypt-07"]]},{order:2,steps:[["egypt-03"],["egypt-02"],["egypt-11"],["egypt-12"],["egypt-13"]]},{order:0,steps:[["egypt-03"],["egypt-04"],["egypt-08"],["egypt-09"],["egypt-10"]]}]},{name:"china",districts:[{order:2,steps:[["china-13"],["china-10","china-13"],["china-07","china-13"],["china-04","china-13"],["china-01","china-13"]]},{order:1,steps:[["china-13"],["china-11","china-13"],["china-08","china-13"],["china-05","china-13"],["china-02","china-13"]]},{order:0,steps:[["china-13"],["china-12","china-13"],["china-09","china-13"],["china-06","china-13"],["china-03","china-13"]]}]}],f=450,v=[1790,911],g=35/90*(Math.PI/2),m=Math.PI/6,y=Math.PI/4,b=.5,M=c["e"].from("./resources/images/earth.compress.png");M.anchor.set(.367,.5),M.position.set(v[0],v[1]),M.scale.set(1),t.stage.addChild(M);var w=h.map((function(e){var n=e.districts.map((function(){return[]})),r=e.districts.map((function(e,t){return t}));r.sort((function(t,n){return e.districts[n].order-e.districts[t].order}));var a,o=Object(s["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;n[i]=e.districts[i].steps.map((function(n){return n.map((function(n){var r=c["e"].from("./resources/images/".concat(e.name,"/").concat(n,".png.compress.png"));return r.anchor.set(.367,.5),r.position.set(v[0],v[1]),r.scale.set(1),t.stage.addChild(r),r}))}))}}catch(u){o.e(u)}finally{o.f()}return n})),O=6,j=O,x=h.map((function(e){return e.districts.map((function(){return 1}))})),C=2400,k=0;function P(){for(var e=0;e<h.length;++e)for(var t=h[e].districts,n=0;n<t.length;++n)for(var r=t[n].steps,a=function(t){var r=t==x[e][n];w[e][n][t].forEach((function(e){e.visible=r}))},o=0;o<r.length;++o)a(o)}function I(e){for(var t=0;t<h.length;++t)for(var n=h[t].districts,r=0;r<n.length;++r)for(var a=n[r].steps,o=0;o<a.length;++o)w[t][r][o].forEach((function(t){t.rotation+=e}));M.rotation+=e}function q(){return w[0][0][1][0].rotation}t.ticker.add((function(e){k+=e,k>C&&(k-=C,j<O&&(j+=1,he()))})),P();var S=0;t.ticker.add((function(e){if(S+=e,S>=n&&(S-=n,Math.random()<b)){for(var t=h.map((function(e,t){var n=g-m+q()-t*(2*Math.PI/h.length),r=(n-y)%(2*Math.PI);return r<0&&(r+=2*Math.PI),Math.min(r,2*Math.PI-r)})),r=0,a=1;a<t.length;++a)t[r]>t[a]&&(r=a);var o=Math.floor(Math.random()*x[r].length);x[r][o]+1<h[r].districts[o].steps.length&&(x[r][o]+=1,P(),fe()),x[r].every((function(e,t){return e+1===h[r].districts[t].steps.length}))&&me()}}));var _=Object(r["k"])(null),E=new c["d"](t.renderer);E.on("pointerdown",(function(e){var t=e.data.global.x,n=e.data.global.y,r=v[0],a=v[1];t==r&&n==a||(_.value=[t,n])})),E.on("pointerup",(function(){_.value=null})),E.on("pointerupoutside",(function(){_.value=null})),E.on("pointermove",(function(e){if(null!==_.value){var t=e.data.global.x,n=e.data.global.y,r=v[0],a=v[1];if(t==r&&n==a)return;var o=Object(i["a"])(_.value,2),s=o[0],c=o[1];_.value=[t,n];var u=Math.atan2(n-a,t-r)-Math.atan2(c-a,s-r);I(u),ue()}}));var F=c["e"].from("./resources/images/god-01.png"),A=c["e"].from("./resources/images/god-02.png");[F,A].forEach((function(e){e.anchor.set(0),e.position.set(0,0),e.scale.set(.6),t.stage.addChild(e)}));var T=Object(r["k"])(!1);Object(r["n"])((function(){T.value?(F.visible=!1,A.visible=!0):(F.visible=!0,A.visible=!1)}));var H=[{type:"fire",path:"./resources/images/res-fire.png"},{type:"chemistry",path:"./resources/images/res-chemistry.png"},{type:"radiation",path:"./resources/images/res-radiation.png"},{type:"biology",path:"./resources/images/res-biology.png"},{type:"battery",path:"./resources/images/res-battery.png"}],J=function(e){var t=c["e"].from(H[e].path);return t.anchor.set(.5),t.scale.set(.5),t},R=[{x:1869,y:623,scale:.3},{x:1789,y:632,scale:.3},{x:1716,y:657,scale:.3},{x:1651,y:692,scale:.3},{x:1588,y:754,scale:.3},{x:1790,y:911,scale:1.2}],z=Array.apply(null,Array(R.length)).map((function(){return X()})),B=c["e"].from("./resources/images/candidates.png");function D(){for(var e=0;e<R.length;++e){var t=z[e][1];t.position.set(R[e].x,R[e].y),t.scale.set(R[e].scale)}}function G(e){return"monster"==e||"storm"==e||"wave"==e}B.scale.set(.4),B.anchor.set(1),B.position.set(1920,1080),t.stage.addChild(B),D(),z.forEach((function(e){return t.stage.addChild(e[1])}));var K=new u["kdTree"]([],(function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}),["x","y"]),L=[300,200],N=32,Q=8,U=45;function V(e,n){var r=G(e),a=Math.random()<.5?1:-1;function i(s){var c=v[0],u=v[1],l=c-n.position.x,d=u-n.position.y,p=Math.sqrt(l*l+d*d),h=l/p,g=d/p,m=n.position.x+N*s*h,y=n.position.y+N*s*g,b=Math.sqrt(Math.pow(c-m,2)+Math.pow(u-y,2)),M=Math.cos(q()),w=Math.sin(q()),O=[[M,w],[-w,M]],j=function(e,t){return{x:O[0][0]*(e-c)+O[0][1]*(t-u),y:O[1][0]*(e-c)+O[1][1]*(t-u)}},x=[[M,-w],[w,M]],C=function(e,t){return{x:x[0][0]*e+x[0][1]*t+c,y:x[1][0]*e+x[1][1]*t+u}};if(!r){var k=K.nearest(Object(o["a"])({id:0},j(m,y)),1,1920);if(k.length&&k[0][1]<2*U){var P=C(k[0][0].x,k[0][0].y),I=P.x,S=P.y,_=Math.abs(c*(y-S)+m*(S-u)+I*(u-y))/Math.sqrt(Math.pow(c-m,2)+Math.pow(u-y,2)),E=Math.sqrt(Math.pow(c-I,2)+Math.pow(u-S,2)-_*_),F=Math.sqrt(4*U*U-_*_),A=Math.sqrt(Math.pow(I-m,2)+Math.pow(S-y,2)-_*_),T=E<=b?F-A:F+A,H=m-T*h,J=y-T*g;return t.ticker.remove(i),n.position.set(H,J),void ae(e,n,k[0][0].id,j(H,J))}}if(b<f){var R=m-(f-b)*h,z=y-(f-b)*g;return t.ticker.remove(i),n.position.set(R,z),void ae(e,n,null,j(R,z))}n.position.set(m,y),n.angle+=a*Q*s}return i}function W(e,n){var r;(r=n.position).set.apply(r,L),n.scale.set(.5),n.rotation=Math.random()*(2*Math.PI),t.stage.addChild(n),t.ticker.add(V(e,n))}function X(){var e=Math.floor(Math.random()*H.length);return[H[e].type,J(e)]}var Y=120,Z=6,$=0;t.ticker.add((function(e){if($+=e,$>Z&&T.value&&(T.value=!1),$>Y){$-=Y,T.value=!0;var n=X();z.splice(0,0,n),W.apply(void 0,Object(a["a"])(z.pop())),D(),t.stage.addChild(n[1])}}));var ee=Object(a["a"])(Array(15).keys()).map((function(e){return c["g"].from("./resources/images/explode/explode-".concat(String(e).padStart(2,"0"),".png"))})),te=300,ne=0,re={};function ae(e,n,r,a){if(G(e))t.stage.removeChild(n);else{var i=v[0],s=v[1],c=Math.atan2(n.position.y-s,n.position.x-i)-q(),u=Math.sqrt(Math.pow(n.position.x-i,2)+Math.pow(n.position.y-s,2));c%=2*Math.PI,c<0&&(c=c%(2*Math.PI)+2*Math.PI);var l=ne++,d=Object(o["a"])({id:l},a),p={theta:c,radius:u,type:e,item:n,node:d,parent:r,children:[]};re[l]=p,null!=r&&re[r].children.push(l),K.insert(d),oe(p),Math.sqrt(Math.pow(n.position.x-L[0],2)+Math.pow(n.position.y-L[1],2))<=te&&me(),se(l)}}function oe(e){var t=e.radius*Math.cos(q()+e.theta)+v[0],n=e.radius*Math.sin(q()+e.theta)+v[1];e.item.position.set(t,n)}function ie(e){var t,n=re[e],r=n.type,o=[],i=Object(s["a"])(n.children);try{for(i.s();!(t=i.n()).done;){var c=t.value;re[c].type===r&&o.push.apply(o,Object(a["a"])(ie(c)))}}catch(u){i.e(u)}finally{i.f()}return o.push(e),o}function se(n){for(var r=re[n].type,a=n;;){var o=re[a].parent;if(null===o||re[o].type!==r)break;a=o}var i=ie(a);l.value+=p*i.length;var u=i.map((function(e){return re[e].item.position.x})).reduce((function(e,t){return e+t}),0)/i.length,f=i.map((function(e){return re[e].item.position.y})).reduce((function(e,t){return e+t}),0)/i.length,m=-(Math.atan2(f-v[1],u-v[0])-q()-g)%(2*Math.PI);m<0&&(m+=2*Math.PI),m/=2*Math.PI;var y=Math.floor(m*h.length),b=m*h.length-y,M=b<=.5;if(!(M&&i.length<e)){var w,O=Object(s["a"])(i);try{var C=function(){var e=w.value,n=re[e],r=n.children.slice();r.reverse();var a,o=Object(s["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;ce(i)}}catch(d){o.e(d)}finally{o.f()}if(null!==n.parent){var u=re[n.parent].children.indexOf(e);re[n.parent].children.splice(u,1)}delete re[e],K.remove(n.node),t.stage.removeChild(n.item);var l=new c["a"](ee);l.anchor.set(.5),l.position.set(n.item.position.x,n.item.position.y),l.loop=!1,l.onComplete=function(){t.stage.removeChild(l)},t.stage.addChild(l),l.play()};for(O.s();!(w=O.n()).done;)C()}catch(I){O.e(I)}finally{O.f()}if(M){var k=Math.floor((1-2*b)*h[y].districts.length);x[y][k]>0&&(x[y][k]-=1,l.value+=d,P(),fe())}else j-=1,he(),0===j&&me()}}function ce(e){var n=re[e],r=n.children.slice();r.reverse();var a,o=Object(s["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;ce(i)}}catch(u){o.e(u)}finally{o.f()}if(t.ticker.add(V(n.type,n.item)),null!==n.parent){var c=re[n.parent].children.indexOf(e);re[n.parent].children.splice(c,1)}delete re[e],K.remove(n.node)}function ue(){Object.values(re).forEach(oe)}var le=new c["c"];le.beginFill(8444213),le.drawRect(0,-19,200,38),le.position.set(144,924),t.stage.addChild(le),le.transform.scale.set(1,1);var de=new c["c"];de.beginFill(8897269),de.drawRect(0,-19,200,38),de.position.set(144,1020),t.stage.addChild(de),de.transform.scale.set(1,1);var pe=c["e"].from("./resources/images/health.png");function he(){var e=j/O;le.transform.scale.set(e,1)}function fe(){var e=Math.max.apply(Math,Object(a["a"])(x.map((function(e,t){return e.reduce((function(e,t){return e+t}),0)/h[t].districts.map((function(e){return e.steps.length-1})).reduce((function(e,t){return e+t}),0)}))));de.transform.scale.set(1-e,1)}pe.anchor.set(0,1),pe.position.set(0,1080),pe.scale.set(1.5),t.stage.addChild(pe),fe();var ve=new c["f"]("0",{fontFamily:"ArtHistoryBook",fontSize:120,fill:0,align:"right"});ve.anchor.set(1,0),ve.position.set(1870,50),t.stage.addChild(ve),Object(r["n"])((function(){ve.text="".concat(l.value)}));var ge=c["e"].from("./resources/images/failure.compress.png");function me(){t.stage.addChild(ge),t.ticker.stop()}ge.anchor.set(.5),ge.position.set(960,540),ge.scale.set(.8)}return v.interactive=!0,v.buttonMode=!0,v.position.set(1120,500),t.stage.addChild(v),v.on("pointerdown",(function(){t.stage.removeChild(h),t.stage.removeChild(f),t.stage.removeChild(v);var e=c["e"].from("./resources/images/help-mode2.png");e.interactive=!0,e.buttonMode=!0,t.stage.addChild(e),e.on("pointerdown",(function(){t.stage.removeChild(e),g(1,61.2)}))})),function(e,t){var a=Object(r["l"])("font-awesome-icon");return Object(r["j"])(),Object(r["d"])(r["a"],null,[Object(r["e"])("div",{ref_key:"el",ref:n,id:"game"},null,512),Object(r["e"])("div",l,[Object(r["e"])("div",null,[Object(r["e"])("button",{onClick:p},[Object(r["f"])(a,{icon:d.value?"compress":"expand"},null,8,["icon"])])])])],64)}}});n("467a");const p=d;var h=p,f=n("ecee"),v=n("c074"),g=n("ad3d");f["c"].add(v["b"],v["a"]),Object(r["c"])(h).component("font-awesome-icon",g["a"]).mount("#app")}});
//# sourceMappingURL=app.c325519f.js.map