(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"4a0c":function(e,t,n){"use strict";n("944b")},"944b":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=n("2909"),o=n("5530"),i=n("3835"),s=n("b85c"),c=(n("18a5"),n("d81d"),n("4e82"),n("99af"),n("b0c0"),n("d3b7"),n("159b"),n("a434"),n("ddb0"),n("4d90"),n("fb6a"),n("07ac"),n("7aaa")),u=n("b946"),l={id:"controls"},d=Object(r["g"])({setup:function(e){var t=new c["b"]({width:1920,height:1080,backgroundColor:16759809}),n=Object(r["k"])(null);Object(r["i"])((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.appendChild(t.view)}));var d=Object(r["k"])(window.innerHeight==screen.height),p=function(){d.value=!d.value,d.value?document.documentElement.requestFullscreen():document.exitFullscreen()},h=c["e"].from("./resources/images/start.png");t.stage.addChild(h);var f=c["e"].from("./resources/images/btn-mode1.png");f.interactive=!0,f.buttonMode=!0,f.position.set(500,500),t.stage.addChild(f),f.on("pointerdown",(function(){t.stage.removeChild(h),t.stage.removeChild(f),t.stage.removeChild(v);var e=c["e"].from("./resources/images/help-mode1.png");e.interactive=!0,e.buttonMode=!0,t.stage.addChild(e),e.on("pointerdown",(function(){t.stage.removeChild(e),g()}))}));var v=c["e"].from("./resources/images/btn-mode2.png");function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=Object(r["k"])(0),l=100,d=60,p=[{name:"euro",districts:[{order:1,steps:[[],["euro-01"],["euro-05"],["euro-08"]]},{order:2,steps:[[],["euro-03"],["euro-06"],["euro-09"],["euro-10"]]},{order:0,steps:[[],["euro-02"],["euro-04"],["euro-07"]]}]},{name:"egypt",districts:[{order:1,steps:[["egypt-03"],["egypt-01"],["egypt-05"],["egypt-06"],["egypt-07"]]},{order:2,steps:[["egypt-03"],["egypt-02"],["egypt-11"],["egypt-12"],["egypt-13"]]},{order:0,steps:[["egypt-03"],["egypt-04"],["egypt-08"],["egypt-09"],["egypt-10"]]}]},{name:"china",districts:[{order:2,steps:[["china-13"],["china-10","china-13"],["china-07","china-13"],["china-04","china-13"],["china-01","china-13"]]},{order:1,steps:[["china-13"],["china-11","china-13"],["china-08","china-13"],["china-05","china-13"],["china-02","china-13"]]},{order:0,steps:[["china-13"],["china-12","china-13"],["china-09","china-13"],["china-06","china-13"],["china-03","china-13"]]}]}],h=450,f=[1790,911],v=35/90*(Math.PI/2),g=Math.PI/6,m=Math.PI/4,y=120,b=.5,M=c["e"].from("./resources/images/earth.compress.png");M.anchor.set(.367,.5),M.position.set(f[0],f[1]),M.scale.set(1),t.stage.addChild(M);var w=p.map((function(e){var n=e.districts.map((function(){return[]})),r=e.districts.map((function(e,t){return t}));r.sort((function(t,n){return e.districts[n].order-e.districts[t].order}));var a,o=Object(s["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;n[i]=e.districts[i].steps.map((function(n){return n.map((function(n){var r=c["e"].from("./resources/images/".concat(e.name,"/").concat(n,".png.compress.png"));return r.anchor.set(.367,.5),r.position.set(f[0],f[1]),r.scale.set(1),t.stage.addChild(r),r}))}))}}catch(u){o.e(u)}finally{o.f()}return n})),O=6,j=O,x=p.map((function(e){return e.districts.map((function(){return 1}))}));function C(){for(var e=0;e<p.length;++e)for(var t=p[e].districts,n=0;n<t.length;++n)for(var r=t[n].steps,a=function(t){var r=t==x[e][n];w[e][n][t].forEach((function(e){e.visible=r}))},o=0;o<r.length;++o)a(o)}function k(e){for(var t=0;t<p.length;++t)for(var n=p[t].districts,r=0;r<n.length;++r)for(var a=n[r].steps,o=0;o<a.length;++o)w[t][r][o].forEach((function(t){t.rotation+=e}));M.rotation+=e}function P(){return w[0][0][1][0].rotation}C();var I=0;t.ticker.add((function(e){if(I+=e,I>=y&&(I-=y,Math.random()<b)){for(var t=p.map((function(e,t){var n=v-g+P()-t*(2*Math.PI/p.length),r=(n-m)%(2*Math.PI);return r<0&&(r+=2*Math.PI),Math.min(r,2*Math.PI-r)})),n=0,r=1;r<t.length;++r)t[n]>t[r]&&(n=r);var a=Math.floor(Math.random()*x[n].length);x[n][a]+1<p[n].districts[a].steps.length&&(x[n][a]+=1,C(),pe())}}));var q=Object(r["k"])(null),S=new c["d"](t.renderer);S.on("pointerdown",(function(e){var t=e.data.global.x,n=e.data.global.y,r=f[0],a=f[1];t==r&&n==a||(q.value=[t,n])})),S.on("pointerup",(function(){q.value=null})),S.on("pointerupoutside",(function(){q.value=null})),S.on("pointermove",(function(e){if(null!==q.value){var t=e.data.global.x,n=e.data.global.y,r=f[0],a=f[1];if(t==r&&n==a)return;var o=Object(i["a"])(q.value,2),s=o[0],c=o[1];q.value=[t,n];var u=Math.atan2(n-a,t-r)-Math.atan2(c-a,s-r);k(u),se()}}));var _=c["e"].from("./resources/images/god-01.png"),E=c["e"].from("./resources/images/god-02.png");[_,E].forEach((function(e){e.anchor.set(0),e.position.set(0,0),e.scale.set(.6),t.stage.addChild(e)}));var F=Object(r["k"])(!1);Object(r["n"])((function(){F.value?(_.visible=!1,E.visible=!0):(_.visible=!0,E.visible=!1)}));var A=[{type:"fire",path:"./resources/images/res-fire.png"},{type:"chemistry",path:"./resources/images/res-chemistry.png"},{type:"radiation",path:"./resources/images/res-radiation.png"},{type:"biology",path:"./resources/images/res-biology.png"},{type:"battery",path:"./resources/images/res-battery.png"}],T=function(e){var t=c["e"].from(A[e].path);return t.anchor.set(.5),t.scale.set(.5),t},H=[{x:1869,y:623,scale:.3},{x:1789,y:632,scale:.3},{x:1716,y:657,scale:.3},{x:1651,y:692,scale:.3},{x:1588,y:754,scale:.3},{x:1790,y:911,scale:1.2}],J=Array.apply(null,Array(H.length)).map((function(){return V()})),R=c["e"].from("./resources/images/candidates.png");function z(){for(var e=0;e<H.length;++e){var t=J[e][1];t.position.set(H[e].x,H[e].y),t.scale.set(H[e].scale)}}function B(e){return"monster"==e||"storm"==e||"wave"==e}R.scale.set(.4),R.anchor.set(1),R.position.set(1920,1080),t.stage.addChild(R),z(),J.forEach((function(e){return t.stage.addChild(e[1])}));var D=new u["kdTree"]([],(function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}),["x","y"]),G=[300,200],K=32,L=8,N=45;function Q(e,n){var r=B(e),a=Math.random()<.5?1:-1;function i(s){var c=f[0],u=f[1],l=c-n.position.x,d=u-n.position.y,p=Math.sqrt(l*l+d*d),v=l/p,g=d/p,m=n.position.x+K*s*v,y=n.position.y+K*s*g,b=Math.sqrt(Math.pow(c-m,2)+Math.pow(u-y,2)),M=Math.cos(P()),w=Math.sin(P()),O=[[M,w],[-w,M]],j=function(e,t){return{x:O[0][0]*(e-c)+O[0][1]*(t-u),y:O[1][0]*(e-c)+O[1][1]*(t-u)}},x=[[M,-w],[w,M]],C=function(e,t){return{x:x[0][0]*e+x[0][1]*t+c,y:x[1][0]*e+x[1][1]*t+u}};if(!r){var k=D.nearest(Object(o["a"])({id:0},j(m,y)),1,1920);if(k.length&&k[0][1]<2*N){var I=C(k[0][0].x,k[0][0].y),q=I.x,S=I.y,_=Math.abs(c*(y-S)+m*(S-u)+q*(u-y))/Math.sqrt(Math.pow(c-m,2)+Math.pow(u-y,2)),E=Math.sqrt(Math.pow(c-q,2)+Math.pow(u-S,2)-_*_),F=Math.sqrt(4*N*N-_*_),A=Math.sqrt(Math.pow(q-m,2)+Math.pow(S-y,2)-_*_),T=E<=b?F-A:F+A,H=m-T*v,J=y-T*g;return t.ticker.remove(i),n.position.set(H,J),void ne(e,n,k[0][0].id,j(H,J))}}if(b<h){var R=m-(h-b)*v,z=y-(h-b)*g;return t.ticker.remove(i),n.position.set(R,z),void ne(e,n,null,j(R,z))}n.position.set(m,y),n.angle+=a*L*s}return i}function U(e,n){var r;(r=n.position).set.apply(r,G),n.scale.set(.5),n.rotation=Math.random()*(2*Math.PI),t.stage.addChild(n),t.ticker.add(Q(e,n))}function V(){var e=Math.floor(Math.random()*A.length);return[A[e].type,T(e)]}var W=120,X=6,Y=0;t.ticker.add((function(e){if(Y+=e,Y>X&&F.value&&(F.value=!1),Y>W){Y-=W,F.value=!0;var n=V();J.splice(0,0,n),U.apply(void 0,Object(a["a"])(J.pop())),z(),t.stage.addChild(n[1])}}));var Z=Object(a["a"])(Array(15).keys()).map((function(e){return c["g"].from("./resources/images/explode/explode-".concat(String(e).padStart(2,"0"),".png"))})),$=300,ee=0,te={};function ne(e,n,r,a){if(B(e))t.stage.removeChild(n);else{var i=f[0],s=f[1],c=Math.atan2(n.position.y-s,n.position.x-i)-P(),u=Math.sqrt(Math.pow(n.position.x-i,2)+Math.pow(n.position.y-s,2));c%=2*Math.PI,c<0&&(c=c%(2*Math.PI)+2*Math.PI);var l=ee++,d=Object(o["a"])({id:l},a),p={theta:c,radius:u,type:e,item:n,node:d,parent:r,children:[]};te[l]=p,null!=r&&te[r].children.push(l),D.insert(d),re(p),Math.sqrt(Math.pow(n.position.x-G[0],2)+Math.pow(n.position.y-G[1],2))<=$&&ve(),oe(l)}}function re(e){var t=e.radius*Math.cos(P()+e.theta)+f[0],n=e.radius*Math.sin(P()+e.theta)+f[1];e.item.position.set(t,n)}function ae(e){var t,n=te[e],r=n.type,o=[],i=Object(s["a"])(n.children);try{for(i.s();!(t=i.n()).done;){var c=t.value;te[c].type===r&&o.push.apply(o,Object(a["a"])(ae(c)))}}catch(u){i.e(u)}finally{i.f()}return o.push(e),o}function oe(r){for(var a=te[r].type,o=r;;){var i=te[o].parent;if(null===i||te[i].type!==a)break;o=i}var u=ae(o);n.value+=d*u.length;var h=u.map((function(e){return te[e].item.position.x})).reduce((function(e,t){return e+t}),0)/u.length,g=u.map((function(e){return te[e].item.position.y})).reduce((function(e,t){return e+t}),0)/u.length,m=-(Math.atan2(g-f[1],h-f[0])-P()-v)%(2*Math.PI);m<0&&(m+=2*Math.PI),m/=2*Math.PI;var y=Math.floor(m*p.length),b=m*p.length-y,M=b<=.5;if(!(M&&u.length<e)){var w,O=Object(s["a"])(u);try{var k=function(){var e=w.value,n=te[e],r=n.children.slice();r.reverse();var a,o=Object(s["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;ie(i)}}catch(d){o.e(d)}finally{o.f()}if(null!==n.parent){var u=te[n.parent].children.indexOf(e);te[n.parent].children.splice(u,1)}delete te[e],D.remove(n.node),t.stage.removeChild(n.item);var l=new c["a"](Z);l.anchor.set(.5),l.position.set(n.item.position.x,n.item.position.y),l.loop=!1,l.onComplete=function(){t.stage.removeChild(l)},t.stage.addChild(l),l.play()};for(O.s();!(w=O.n()).done;)k()}catch(q){O.e(q)}finally{O.f()}if(M){var I=Math.floor((1-2*b)*p[y].districts.length);x[y][I]>0&&(x[y][I]-=1,n.value+=l,C(),pe())}else j-=1,de(),0===j&&ve()}}function ie(e){var n=te[e],r=n.children.slice();r.reverse();var a,o=Object(s["a"])(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;ie(i)}}catch(u){o.e(u)}finally{o.f()}if(t.ticker.add(Q(n.type,n.item)),null!==n.parent){var c=te[n.parent].children.indexOf(e);te[n.parent].children.splice(c,1)}delete te[e],D.remove(n.node)}function se(){Object.values(te).forEach(re)}var ce=new c["c"];ce.beginFill(8444213),ce.drawRect(0,-19,200,38),ce.position.set(144,924),t.stage.addChild(ce),ce.transform.scale.set(1,1);var ue=new c["c"];ue.beginFill(8897269),ue.drawRect(0,-19,200,38),ue.position.set(144,1020),t.stage.addChild(ue),ue.transform.scale.set(1,1);var le=c["e"].from("./resources/images/health.png");function de(){var e=j/O;ce.transform.scale.set(e,1)}function pe(){var e=Math.max.apply(Math,Object(a["a"])(x.map((function(e,t){return e.reduce((function(e,t){return e+t}),0)/p[t].districts.map((function(e){return e.steps.length-1})).reduce((function(e,t){return e+t}),0)}))));ue.transform.scale.set(1-e,1)}le.anchor.set(0,1),le.position.set(0,1080),le.scale.set(1.5),t.stage.addChild(le),pe();var he=new c["f"]("0",{fontFamily:"ArtHistoryBook",fontSize:120,fill:0,align:"right"});he.anchor.set(1,0),he.position.set(1870,50),t.stage.addChild(he),Object(r["n"])((function(){he.text="".concat(n.value)}));var fe=c["e"].from("./resources/images/failure.compress.png");function ve(){t.stage.addChild(fe),t.ticker.stop()}fe.anchor.set(.5),fe.position.set(960,540),fe.scale.set(.8)}return v.interactive=!0,v.buttonMode=!0,v.position.set(1120,500),t.stage.addChild(v),v.on("pointerdown",(function(){t.stage.removeChild(h),t.stage.removeChild(f),t.stage.removeChild(v);var e=c["e"].from("./resources/images/help-mode2.png");e.interactive=!0,e.buttonMode=!0,t.stage.addChild(e),e.on("pointerdown",(function(){t.stage.removeChild(e),g(1)}))})),function(e,t){var a=Object(r["l"])("font-awesome-icon");return Object(r["j"])(),Object(r["d"])(r["a"],null,[Object(r["e"])("div",{ref_key:"el",ref:n,id:"game"},null,512),Object(r["e"])("div",l,[Object(r["e"])("div",null,[Object(r["e"])("button",{onClick:p},[Object(r["f"])(a,{icon:d.value?"compress":"expand"},null,8,["icon"])])])])],64)}}});n("4a0c");const p=d;var h=p,f=n("ecee"),v=n("c074"),g=n("ad3d");f["c"].add(v["b"],v["a"]),Object(r["c"])(h).component("font-awesome-icon",g["a"]).mount("#app")}});
//# sourceMappingURL=app.2cb20ca7.js.map